(function(t){function e(e){for(var n,o,c=e[0],r=e[1],l=e[2],d=0,f=[];d<c.length;d++)o=c[d],s[o]&&f.push(s[o][0]),s[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,c=1;c<a.length;c++){var r=a[c];0!==s[r]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},s={app:0},i=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/gold-dice/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0c19":function(t,e,a){t.exports=a.p+"img/mobile-logo-crown.9ab2c347.png"},1:function(t,e){},"167f":function(t,e,a){"use strict";var n=a("39c7"),s=a.n(n);s.a},"1fcd":function(t,e,a){},2:function(t,e){},3:function(t,e){},"39c7":function(t,e,a){},"3a2b":function(t,e,a){"use strict";var n=a("a4f1"),s=a.n(n);s.a},"3e85":function(t,e,a){"use strict";var n=a("737a"),s=a.n(n);s.a},"44f2":function(t,e,a){},5452:function(t,e,a){"use strict";var n=a("5ab3"),s=a.n(n);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Header"),a("div",{staticClass:"container"},[a("Playground"),a("notifications",{staticClass:"notice-style",staticStyle:{top:"64px"}})],1)],1)},i=[],o=(a("ab8b"),a("7e7e"),a("1fcd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("img",{staticClass:"mobile-logo-crown",attrs:{src:a("0c19")}}),n("div",{staticClass:"user-operate"},[n("div",{staticClass:"user-operate-item"},[t._v("\n            邀请好友\n        ")]),n("div",{staticClass:"user-operate-item"},[t._v("\n            游戏规则\n        ")]),t._m(0),t.account.name?t._e():n("div",{staticClass:"log-operate user-operate-item"},[n("div",{on:{click:t.login}},[n("span",{staticClass:"icon icon-logout"}),n("span",[t._v("登录")])])]),t.account.name?n("div",{staticClass:"user-operate-item user-log-out"},[n("span",[t._v(t._s(t.account.name))]),n("div",{staticClass:"logout-btn",on:{click:t.logout}},[n("span",{staticClass:"icon icon-logout"}),n("span",[t._v("登出")])])]):t._e()])])}),c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-setting user-operate-item"},[a("span",{staticClass:"icon icon-language"}),t._v(" 中文")])}],r=(a("7514"),new URL(location.href)),l=r.searchParams.get("test"),u={blockchain:"eos",host:l?"api.kylin.alohaeos.com":"api1.eosasia.one",port:443,protocol:"https",chainId:l?"5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191":"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906"},d=new n["default"],f={methods:{login:function(){var t=this;scatter.getIdentity({accounts:[u]}).then(function(){var e=scatter.identity.accounts.find(function(t){return"eos"===t.blockchain});e&&t.$store.commit("UPDATE_ACCOUNT",e)}).catch(function(e){t.$notify({type:"warn",text:e.message})})},logout:function(){var t=this;scatter.forgetIdentity().then(function(){t.$notify({type:"success",text:"User logout success"}),t.$store.commit("UPDATE_ACCOUNT",{})})}},computed:{account:function(){return this.$store.state.account}}},p=f,h=(a("5452"),a("2877")),v=Object(h["a"])(p,o,c,!1,null,null,null);v.options.__file="Header.vue";var m=v.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"playground"},[a("Detail"),a("Operate"),a("Orders")],1)},b=[],g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"playground-detail section-item hide-less-1280"},[t._m(0),a("div",{staticClass:"detail-num-wrap hole"},[a("div",{staticClass:"detail-num-block"},[t._v("\n            小于该数获胜 "),a("br"),a("span",{staticClass:"hole-num"},[t._v(" "+t._s(t.diceAnalytic.rollUnderNum))])]),a("div",{staticClass:"detail-num-block"},[t._v("\n            赔率 "),a("br"),a("span",{staticClass:"hole-num"},[t._v(" "+t._s(Number(t.diceAnalytic.payOut).toFixed(2))+"x")])]),a("div",{staticClass:"detail-num-block"},[t._v("\n            中奖概率 "),a("br"),a("span",{staticClass:"hole-num"},[t._v(" "+t._s(Number(t.diceAnalytic.winChance).toFixed(2))+"%")])])])])},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section-tab"},[a("div",{staticClass:"section-tab-item active"},[t._v("\n            游戏详情\n        ")])])}],y={computed:{diceAnalytic:function(){return this.$store.state.diceAnalytic}}},S=y,O=(a("167f"),Object(h["a"])(S,g,C,!1,null,"75a7781d",null));O.options.__file="Detail.vue";var w=O.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"playground-operate section-item"},[t._m(0),a("div",{staticClass:"section-content"},[a("div",{staticClass:"hole hole-result"},[a("div",{staticClass:"operate-num"},[a("span",{class:{fade20:"0"===t.operateNum1}},[t._v(t._s(t.operateNum1))]),a("span",{class:{fade20:"0"===t.operateNum1&&"0"===t.operateNum2}},[t._v(t._s(t.operateNum2))]),a("span",[t._v(t._s(t.operateNum3))])])]),a("div",{staticClass:"range-bar"},[a("div",{staticClass:"block-title"},[t._v("选择区间")]),a("vue-slider",t._b({model:{value:t.rollUnder,callback:function(e){t.rollUnder=e},expression:"rollUnder"}},"vue-slider",t.sliderOptions,!1),[a("template",{attrs:{slotScope:"{rollUnder}"},slot:"dot"},[a("div",{staticClass:"range-dot"},[t._v("\n                        "+t._s(t.rollUnder)+"\n                    ")])])],2),t._m(1)],1),a("div",{staticClass:"choose-stake"},[a("div",{staticClass:"block-title"},[t._v("\n                投注金额\n            ")]),a("div",{staticClass:"choose-stake-1"},[a("span",{staticClass:"icon icon-eos"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.eos,expression:"eos"}],staticClass:"hole hole-stake",domProps:{value:t.eos},on:{input:function(e){e.target.composing||(t.eos=e.target.value)}}})]),a("div",{staticClass:"choose-stake-2"},[a("button",{staticClass:"btn-operate",on:{click:function(e){t.setEOS(.5)}}},[t._v("1/2")])]),a("div",{staticClass:"choose-stake-3"},[a("button",{staticClass:"btn-operate",on:{click:function(e){t.setEOS(2)}}},[t._v("2X")])]),a("div",{staticClass:"choose-stake-4"},[a("button",{staticClass:"btn-operate",on:{click:function(e){t.setEOS()}}},[t._v("MAX")])])]),a("div",{staticClass:"hole gain-prize-wrap"},[a("span",{staticClass:"gain-prize-title"},[t._v("获得奖金")]),a("span",{staticClass:"gain-prize-num hole-num"},[t._v(t._s(t.payWin))])]),a("div",{staticClass:"hole hide-more-1280"},[a("div",{staticClass:"detail-num-wrap"},[t._v("\n                小于该数获胜 "),a("br"),a("span",{staticClass:"hole-num"},[t._v(" "+t._s(t.diceAnalytic.rollUnderNum))])]),a("div",{staticClass:"detail-num-wrap"},[t._v("\n                赔率 "),a("br"),a("span",{staticClass:"hole-num"},[t._v(" "+t._s(Number(t.diceAnalytic.payOut).toFixed(2))+"x")])]),a("div",{staticClass:"detail-num-wrap"},[t._v("\n                中奖概率 "),a("br"),a("span",{staticClass:"hole-num"},[t._v(" "+t._s(Number(t.diceAnalytic.winChance).toFixed(2))+"%")])])]),a("div",{staticClass:"eos-balance-hint"},[a("span",{staticClass:"text-hint"},[t._v("您的 EOS 余额：")]),a("span",[t._v(t._s(t.eosBalance+" EOS"))])]),a("div",{staticClass:"hole hole-shake"},[t.account.name?a("button",{staticClass:"shake-btn",on:{click:t.doShakeAction}},[t._v("摇起来")]):t._e(),t.account.name?t._e():a("button",{staticClass:"shake-btn",on:{click:t.login}},[t._v("登录")])])])])},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"section-tab hide-less-1280"},[a("div",{staticClass:"section-tab-item active"},[t._v("\n            操作区\n        ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"range-bar-piecewise-label-pc "},[a("div",{staticClass:"range-bar-piecewise-item",staticStyle:{"text-align":"left"}},[t._v("\n                    1%\n                ")]),a("div",{staticClass:"range-bar-piecewise-item"},[t._v("\n                    20%\n                ")]),a("div",{staticClass:"range-bar-piecewise-item"},[t._v("\n                    40%\n                ")]),a("div",{staticClass:"range-bar-piecewise-item"},[t._v("\n                    60%\n                ")]),a("div",{staticClass:"range-bar-piecewise-item"},[t._v("\n                    80%\n                ")]),a("div",{staticClass:"range-bar-piecewise-item",staticStyle:{"text-align":"right"}},[t._v("\n                    100%\n                ")])])}],E=(a("87f3"),a("6b54"),a("3835")),N=(a("ac6a"),a("5df3"),a("a481"),a("c5f6"),a("7f7f"),a("d3b7")),k=a.n(N),U=k()({httpEndpoint:"".concat(u.protocol,"://").concat(u.host,":").concat(u.port),chainId:u.chainId}),$=a("98e6"),T=a.n($),P=a("6f79"),B=a.n(P),D={mounted:function(){var t=this;d.$on("ROLLUNDER_CHANGE",function(e){return t.rollUnder=e}),this.getEOS(),this.getPool(),this.getOperateNum(),this.$store.commit("UPDATE_DICE_ANYLYTICS",{rollUnderNum:this.rollUnder,payOut:98/(this.rollUnder-1),winChance:this.rollUnder-1})},data:function(){return{eosBalance:0,eos:1,poolBalance:0,operateNum:"050",rollUnder:50,choice:"",diceGameScope:"bpeosbetdice",diceLogScope:"bpeosdicelog",sliderOptions:{min:2,max:96,style:{margin:"0 auto"},sliderStyle:{padding:0,margin:"0 auto"},processStyle:{background:"#fff"},tooltip:!1,bgStyle:{border:"none",borderRadius:"10px",boxShadow:"inset rgba(0,0,0,.1) 0 1px 1px 0, inset rgba(255,255,255,.2) 0 -1px 1px 0",background:"rgba(0, 0, 0, .05)"}}}},methods:{getEOS:function(){var t=this;if(this.account.name)return U.getAccount(this.account.name).then(function(e){var a=e.core_liquid_balance;t.eosBalance=Number(a.replace(/\sEOS/,""))});this.eosBalance=0},getPool:function(){var t=this;Promise.all([U.getTableRows({json:!0,code:"eosio.token",table:"accounts",scope:this.diceGameScope}),U.getTableRows({json:!0,code:this.diceGameScope,table:"fundpool",scope:this.diceGameScope})]).then(function(e){var a=Object(E["a"])(e,2),n=a[0],s=a[1];t.poolBalance=s.rows.length>0?n.rows[0].balance.slice(0,-4)-s.rows[0].locked.slice(0,-4):n.rows[0].balance.slice(0,-4)})},getOperateNum:function(){var t=this.rollUnder.toString();return this.rollUnder<100?"0"+t:t},floor:function(t,e){return Number(Math.floor(t+"e"+e)+"e-"+e)},maxBetAmount:function(){return this.floor(this.poolBalance/50/(98/this.winChance)*.9,4)},getClientSeed:function(){var t=Math.floor(Math.random()*Math.floor(Number.MAX_SAFE_INTEGER));return T()("sha1").update(this.account.name+Date.now()+t).digest("hex")},doShakeAction:function(){var t=this,e=this.maxBetAmount();if(this.eos>e)this.$notify({title:"Bet Failed",text:"Bet Amount should not be more than "+e.toFixed(4)+" EOS",type:"error"});else{var a=.1;if(this.eos<a)this.$notify({title:"Bet Failed",text:"Bet Amount should be more than "+a.toFixed(4)+" EOS",type:"error"});else{var n=scatter.eos(u,k.a,{});"".concat(this.account.name,"@").concat(this.account.authority);this.showEOSAnimation=!0,this.$notify({text:"Waiting for Scatter to confirm transfer..."});var s="eosiosunmoon",i=this.getClientSeed();n.transfer({from:this.account.name,to:this.diceGameScope,quantity:Number(this.eos).toFixed(4)+" EOS",memo:"".concat(this.rollUnder,"-").concat(i,"-").concat(s)}).then(function(){t.getEOS(),t.fetchResult(i),t.animating=!0,t.$notify({title:"Bet success",text:"Waiting for bet result",type:"info"})}).catch(function(e){t.$notify({type:"error",text:e.message||JSON.parse(e).error.details[0].message})})}}},fetchResult:function(t){var e=this,a=setInterval(function(){e.operateNum=Number(94*Math.random()+2).toFixed(0)});U.getActions(this.diceLogScope,-1,-20).then(function(n){var s=n.actions,i=s.find(function(a){return a.action_trace&&a.action_trace.act&&a.action_trace.act.account===e.diceLogScope&&"result"===a.action_trace.act.name&&a.action_trace.act.data&&a.action_trace.act.data.result&&a.action_trace.act.data.result.seed_hash===t});if(!i)return e.fetchResult(t);var o=i.action_trace.act.data.result,c=o.amount,r=o.payout;"0.0000 EOS"===r?(e.showDownAnimation=!0,e.animationTxt=c):(e.showUpAnimation=!0,e.animationTxt=r),clearInterval(a),e.operateNum=c,setTimeout(function(){e.showDownAnimation=!1,e.showUpAnimation=!1},3100),e.animating=!1,e.getEOS()})},setEOS:function(t){var e=t?this.eos*t:this.eosBalance;switch(!0){case e<.1:e=.1;break;case e>this.eosBalance:e=this.eosBalance;break;case e>this.maxBetAmount():e=this.maxBetAmount();break}this.eos=Number(e).toFixed(4)},login:function(){var t=this;scatter.getIdentity({accounts:[u]}).then(function(){var e=scatter.identity.accounts.find(function(t){return"eos"===t.blockchain});e&&t.$store.commit("UPDATE_ACCOUNT",e)}).catch(function(e){t.$notify({type:"warn",text:e.message})})}},watch:{account:function(){this.getEOS()},rollUnder:function(){this.$store.commit("UPDATE_DICE_ANYLYTICS",{rollUnderNum:this.rollUnder,payOut:98/(this.rollUnder-1),winChance:this.rollUnder-1})}},computed:{operateNum1:function(){return this.operateNum.toString().slice(0,1)},operateNum2:function(){return this.operateNum.toString().slice(1,2)},operateNum3:function(){return this.operateNum.toString().slice(2,3)},diceAnalytic:function(){return this.$store.state.diceAnalytic},payWin:function(){return(this.eos*this.$store.state.diceAnalytic.payOut).toFixed(4)},account:function(){return this.$store.state.account}},components:{vueSlider:B.a}},j=D,I=(a("dd61"),Object(h["a"])(j,x,A,!1,null,"26abc1bb",null));I.options.__file="Operate.vue";var F=I.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"playground-orders section-item"},[a("div",{staticClass:"section-tab"},[a("div",{staticClass:"section-tab-item",class:{active:1===t.currentTab},on:{click:t.getAllRecord}},[t._v("所有历史")]),a("div",{staticClass:"section-tab-item",class:{active:2===t.currentTab},on:{click:t.getMyRecord}},[t._v("我的历史")])]),a("div",{staticClass:"section-content"},[a("table",{staticClass:"orders-table"},[t._m(0),a("tbody",t._l(t.orders,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.action_trace.act.data.result.player))]),a("td",{staticClass:"hide-less-1280"},[t._v(t._s(e.action_trace.act.data.result.roll_under))]),a("td",{staticClass:"hide-less-1280"},[t._v(t._s(e.action_trace.act.data.result.amount.replace("EOS","")))]),a("td",[t._v(t._s(e.action_trace.act.data.result.random_roll))]),a("td",{staticClass:"payout-num"},[t._v(t._s("0.0000 EOS"!==e.action_trace.act.data.result.payout&&e.action_trace.act.data.result.payout.replace("EOS","")||""))])])}))])])])},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("玩家")]),a("th",{staticClass:"hide-less-1280"},[t._v("选择")]),a("th",{staticClass:"hide-less-1280"},[t._v("投注")]),a("th",[t._v("结果")]),a("th",[t._v("奖金")])])])}],M={mounted:function(){setInterval(this.fetchOrders,1e3)},data:function(){return{currentTab:1,orders:[],diceLogScope:"bpeosdicelog"}},methods:{fetchOrders:function(){var t=this;U.getActions(this.diceLogScope,-1,-20).then(function(e){var a=e.actions;t.orders=a.filter(function(e){return e.action_trace&&e.action_trace.act&&e.action_trace.act.data&&e.action_trace.act.data.result&&e.action_trace.act.account==t.diceLogScope&&"result"==e.action_trace.act.name}).reverse()})},dateFormat:function(t){return new Date(t+"Z").toLocaleTimeString()},getAllRecord:function(){this.currentTab=1},getMyRecord:function(){this.currentTab=2}}},G=M,Y=(a("3e85"),Object(h["a"])(G,R,L,!1,null,"3aeb8dee",null));Y.options.__file="Orders.vue";var H=Y.exports,W={components:{Detail:w,Operate:F,Orders:H}},z=W,J=(a("3a2b"),Object(h["a"])(z,_,b,!1,null,null,null));J.options.__file="Playground.vue";var X=J.exports,q={name:"app",components:{Header:m,Playground:X}},Z=q,K=(a("5c0b"),Object(h["a"])(Z,s,i,!1,null,null,null));K.options.__file="App.vue";var Q=K.exports,V=a("ee98"),tt=a.n(V),et=a("2f62");n["default"].use(et["a"]);var at=new et["a"].Store({state:{account:{},diceAnalytic:{rollUnderNum:"",payOut:"",winChance:""}},mutations:{UPDATE_ACCOUNT:function(t,e){t.account=e},UPDATE_DICE_ANYLYTICS:function(t,e){t.diceAnalytic=e}}});n["default"].config.productionTip=!1,n["default"].use(tt.a),new n["default"]({render:function(t){return t(Q)},store:at}).$mount("#app")},"5ab3":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var n=a("8fba"),s=a.n(n);s.a},"737a":function(t,e,a){},"7e7e":function(t,e,a){},"8fba":function(t,e,a){},a4f1:function(t,e,a){},dd61:function(t,e,a){"use strict";var n=a("44f2"),s=a.n(n);s.a}});
//# sourceMappingURL=app.f6aa2ecd.js.map